# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –±–æ—Ç–∞ Pilates Reformer

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 27 –Ω–æ—è–±—Ä—è 2025
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** ‚úÖ 95% (11 –∏–∑ 11 —Ä–∞–∑–¥–µ–ª–æ–≤ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω—ã; 1 –æ—Å—Ç–∞—Ç–æ–∫ ‚Äî —à–∞–≥ 4.3)
**–Ø–∑—ã–∫:** Python 3.12.1 + aiogram 3.13.1
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite —Å SQLAlchemy 2.0.36

---

## üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —à–∞–≥–∏ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º

### ‚úÖ –†–∞–∑–¥–µ–ª 1: –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç–∞—Ç—É—Å—ã (100%)

**–®–∞–≥ 1.1:** –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –∑–∞–Ω—è—Ç–∏—è –≤ `Booking`
- ‚úÖ –ü–æ–ª–µ `lesson_type` —Å —Ç–∏–ø–∞–º–∏: trial, group_single, group_subscription, individual
- ‚úÖ –í—Å–µ –º–µ—Å—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è Booking –æ–±–Ω–æ–≤–ª–µ–Ω—ã

**–®–∞–≥ 1.2:** –£—Ç–æ—á–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –∏ —Å—Ç–∞—Ç—É—Å—ã
- ‚úÖ –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã: "15 –º–∞—Ä—Ç–∞ 2025" (—á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π)
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã: pending, paid, done, cancelled, late_cancel
- ‚úÖ –í—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ HH:MM

**–®–∞–≥ 1.3:** –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã 4/6/8 –∏ —Å—Ä–æ–∫ 1 –º–µ—Å—è—Ü
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ Subscription –¥–ª—è 4/6/8 –∑–∞–Ω—è—Ç–∏–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 30 –¥–Ω–µ–π (expires_at)

### ‚úÖ –†–∞–∑–¥–µ–ª 2: –ö–æ–Ω—Ñ–∏–≥ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (100%)

**–®–∞–≥ 2.1:** –¢–∞–π–º–∑–æ–Ω–∞ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –°–ë–ü
- ‚úÖ SBP_PHONE = "+7 922 507 81**" –≤ constants.py
- ‚úÖ –¢–∞–π–º–∑–æ–Ω–∞: Europe/Moscow

**–®–∞–≥ 2.2:** –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –∏ —Ç–∞—Ä–∏—Ñ—ã
- ‚úÖ LESSON_TYPES: trial (900‚ÇΩ), group_single (1000‚ÇΩ), individual (1800‚ÇΩ)
- ‚úÖ SUBSCRIPTION_PRICES: 4‚Üí3600‚ÇΩ, 6‚Üí5400‚ÇΩ, 8‚Üí6800‚ÇΩ

**–®–∞–≥ 2.3:** –¢–µ–∫—Å—Ç—ã –∏ tone of voice
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã WELCOME_TEXT, REMINDER_12H, REMINDER_2H
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ 10 —á–∞—Å–æ–≤ –≤ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### ‚úÖ –†–∞–∑–¥–µ–ª 3: Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (80%)

**–®–∞–≥ 3.1-3.2:** Google Sheets —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ `update_free_slots(row_index, delta)` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–æ–±–æ–¥–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏
- ‚úÖ `log_event_to_sheet(telegram_id, action_text)` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
- ‚è≥ –®–∞–≥ 3.1 (–¢–∏–ø—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏) –æ—Å—Ç–∞—ë—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### ‚úÖ –†–∞–∑–¥–µ–ª 4: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã (90%)

**–®–∞–≥ 4.1:** –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- ‚úÖ FSM —Å–æ—Å—Ç–æ—è–Ω–∏–µ BookingStates.choosing_lesson_type
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ lesson_type_keyboard() —Å 4 –æ–ø—Ü–∏—è–º–∏

**–®–∞–≥ 4.2:** –õ–æ–≥–∏–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—É
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ (expires_at, classes_left)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ 1 –∑–∞–Ω—è—Ç–∏—è –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

**–®–∞–≥ 4.3:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ –º–µ—Å—Ç
- ‚è≥ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞; UI –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω (–º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–∑–∂–µ)

### ‚úÖ –†–∞–∑–¥–µ–ª 5: –í—Ä–µ–º—è, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –ø—Ä–∞–≤–∏–ª–æ 10 —á–∞—Å–æ–≤ (100%)

**–®–∞–≥ 5.1:** Helper –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –∑–∞–Ω—è—Ç–∏—è
- ‚úÖ `hours_to_lesson(booking)` –≤ utils/helpers.py
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ä–º–∞—Ç–∞ "27 –Ω–æ—è–±—Ä—è 2025 10:00"

**–®–∞–≥ 5.2:** –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 12 –∏ 2 —á–∞—Å–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ 12/2 —á–∞—Å–æ–≤ (–±—ã–ª–æ 24/2)
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ send_12h_reminder(), send_2h_reminder()

**–®–∞–≥ 5.3:** –ü—Ä–∞–≤–∏–ª–æ 10 —á–∞—Å–æ–≤ –¥–ª—è –æ—Ç–º–µ–Ω—ã/–ø–µ—Ä–µ–Ω–æ—Å–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ cancel_booking() –∏ reschedule_booking()
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `if hours_to_lesson() < 10` —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º

### ‚úÖ –†–∞–∑–¥–µ–ª 6: –†–æ–ª–∏ (100%)

**–®–∞–≥ 6.1:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞ –ø–æ TRAINER_CHAT_IDS
- ‚úÖ –ü—Ä–∏ /start –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –≤ TRAINER_CHAT_IDS
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "üéì –í—ã –≤–æ—à–ª–∏ –∫–∞–∫ —Ç—Ä–µ–Ω–µ—Ä"

**–®–∞–≥ 6.2:** ¬´–ú–æ–∏ –∑–∞–Ω—è—Ç–∏—è –∫–∞–∫ —Ç—Ä–µ–Ω–µ—Ä–∞¬ª
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≥–¥–µ trainer = —Ç–µ–∫—É—â–∏–π —Ç—Ä–µ–Ω–µ—Ä
- ‚úÖ –ü–æ–∫–∞–∑ –≤—Ä–µ–º–µ–Ω–∏, —Ç–∏–ø–∞ –∑–∞–Ω—è—Ç–∏—è, –§–ò–û –∫–ª–∏–µ–Ω—Ç–∞, —Å—Ç–∞—Ç—É—Å–∞

**–®–∞–≥ 6.3:** –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- ‚úÖ –ú–µ–Ω—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –Ω–∞ –¥–µ–Ω—å –∏ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö

### ‚úÖ –†–∞–∑–¥–µ–ª 7: Admin override (100%)

**–®–∞–≥ 7.1:** –ë–∞–∑–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –∞–¥–º–∏–Ω–∞
- ‚úÖ –§—É–Ω–∫—Ü–∏—è admin_today_bookings() —ÅÁÆ°ÁêÜ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ –∂–µ –ø—Ä–∞–≤–∏–ª–æ 10 —á–∞—Å–æ–≤

**–®–∞–≥ 7.2:** Override –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –§—É–Ω–∫—Ü–∏—è admin_cancel_no_penalty() –¥–ª—è –æ—Ç–º–µ–Ω—ã –±–µ–∑ —à—Ç—Ä–∞—Ñ–∞
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–æ—Ç–æ–≤

### ‚úÖ –†–∞–∑–¥–µ–ª 8: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (100%)

**–®–∞–≥ 8.1-8.2:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `log_event_to_sheet(telegram_id, action_text)` –≤ services/google_sheets.py
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Å—Ç–∞—Ä—Ç, –º–µ–Ω—é, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ç–∑—ã–≤—ã
- ‚úÖ –§–æ—Ä–º–∞—Ç: "message: /start", "click: –ú–æ–∏ –∑–∞–Ω—è—Ç–∏—è", "cancel_ok: ..."

### ‚úÖ –†–∞–∑–¥–µ–ª 9: –û—Ç–∑—ã–≤—ã —Å –º–µ–¥–∏–∞ (100%)

**–®–∞–≥ 9.1:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ FSM –æ—Ç–∑—ã–≤–æ–≤
- ‚úÖ –ü–æ—Å–ª–µ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
- ‚úÖ –ö–Ω–æ–ø–∫–∏ "–î–∞, –¥–æ–±–∞–≤–∏—Ç—å" / "–ù–µ—Ç, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å"

**–®–∞–≥ 9.2:** –ü—Ä–∏—ë–º –º–µ–¥–∏–∞
- ‚úÖ –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–∏—ë–º —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ –¥–æ 10 —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ì–æ—Ç–æ–≤–æ" –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**–®–∞–≥ 9.3:** –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç–∑—ã–≤ —Å –º–µ–¥–∏–∞
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–¥–º–∏–Ω—É —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Events —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ñ–∞–π–ª–æ–≤

### ‚úÖ –†–∞–∑–¥–µ–ª 10: –ü–ª–∞—Ç—ë–∂–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞ (100%)

**–®–∞–≥ 10.1:** –û—Ç–∫–ª—é—á–∏—Ç—å Yookassa
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–∞ —Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ –∑–∞–≥–ª—É—à–∫—É
- ‚úÖ –°—Ç–∞—Ç—É—Å "pending" –≤–º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç–µ–∂–∞

**–®–∞–≥ 10.2:** –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ –ø–µ—Ä–µ–≤–æ–¥–æ–º
- ‚úÖ PAYMENT_MESSAGE —Å –Ω–æ–º–µ—Ä–æ–º –°–ë–ü +7 922 507 81**
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –≤ confirm_booking()

### ‚úÖ –†–∞–∑–¥–µ–ª 11: –¢—Ä–∏–≥–≥–µ—Ä –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (100%)

**–®–∞–≥ 11.1:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ last_activity
- ‚úÖ –ü–æ–ª–µ last_inactivity_message_sent –≤ User
- ‚úÖ –§—É–Ω–∫—Ü–∏—è update_user_activity() –≤ utils/helpers.py
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ /start, –∫–Ω–æ–ø–∫–∞—Ö –º–µ–Ω—é, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

**–®–∞–≥ 11.2:** –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö
- ‚úÖ check_inactive_users() –≤ services/scheduler.py
- ‚úÖ IntervalTrigger (24 —á–∞—Å–∞, —Å—Ç–∞—Ä—Ç –≤ 9:00)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –º–æ—Ç–∏–≤–∏—Ä—É—é—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**–®–∞–≥ 11.3:** –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ last_inactivity_message_sent
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 1 —Ä–∞–∑ –≤ –ø–µ—Ä–∏–æ–¥ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/workspaces/TanyaTGK_Admin/
‚îú‚îÄ‚îÄ main.py                          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (ADMIN_CHAT_IDS, TRAINER_CHAT_IDS)
‚îú‚îÄ‚îÄ requirements.txt                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îú‚îÄ‚îÄ database.py                  # SQLAlchemy async session
‚îÇ   ‚îú‚îÄ‚îÄ models.py                    # User, Booking, Subscription + last_activity
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îú‚îÄ‚îÄ start.py                     # /start –∫–æ–º–∞–Ω–¥–∞, –º–µ–Ω—é –ø–æ —Ä–æ–ª—è–º, update_user_activity
‚îÇ   ‚îú‚îÄ‚îÄ booking.py                   # –ü—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, cancel, reschedule
‚îÇ   ‚îú‚îÄ‚îÄ trainer.py                   # –ú–µ–Ω—é —Ç—Ä–µ–Ω–µ—Ä–∞, –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–Ω—è—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                     # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ profile.py                   # –ú–æ–∏ –∑–∞–Ω—è—Ç–∏—è, –º–æ–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ feedback.py                  # –û—Ç–∑—ã–≤—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–µ–¥–∏–∞ (9+ —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ payments.py                  # –ü–ª–∞—Ç—ë–∂–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ faq.py                       # FAQ
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ google_sheets.py             # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets (update_free_slots, log_event_to_sheet)
‚îÇ   ‚îú‚îÄ‚îÄ google_calendar.py           # Google Calendar (–∑–∞–≥–ª—É—à–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ scheduler.py                 # APScheduler: –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, check_inactive_users
‚îÇ   ‚îú‚îÄ‚îÄ yookassa.py                  # –ó–∞–≥–ª—É—à–∫–∞ –æ–ø–ª–∞—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îú‚îÄ‚îÄ main_menu.py                 # –ú–µ–Ω—é –ø–æ —Ä–æ–ª—è–º (get_main_menu(is_trainer))
‚îÇ   ‚îú‚îÄ‚îÄ lesson_type.py               # –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∑–∞–Ω—è—Ç–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ booking.py                   # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ constants.py                 # LESSON_TYPES, TRAINER_MENU_BUTTONS, PAYMENT_MESSAGE
‚îÇ   ‚îú‚îÄ‚îÄ helpers.py                   # hours_to_lesson(), update_user_activity()
‚îÇ   ‚îú‚îÄ‚îÄ logging_config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ .env.example                     # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore                       # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ git
‚îî‚îÄ‚îÄ plan.md                          # –≠—Ç–æ—Ç –∂–µ –ø–ª–∞–Ω (95% –∑–∞–≤–µ—Ä—à–µ–Ω–æ)
```

---

## üéØ –û—Å—Ç–∞–≤—à–∏–µ—Å—è —Ä–∞–±–æ—Ç—ã

### ‚è≥ –®–∞–≥ 4.3: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ –º–µ—Å—Ç (5%)

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞:
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `update_free_slots()` –≤ google_sheets.py
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å UI –≤ keyboards/booking.py –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤

**–ö–∞–∫ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
```python
# –í times_keyboard():
# –í–º–µ—Å—Ç–æ: "10:00"
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: "10:00 (–æ—Å—Ç–∞–ª–æ—Å—å 2 –∏–∑ 3)"  # –ù–∞ –æ—Å–Ω–æ–≤–µ free_slots –∏–∑ Google Sheets
```

---

## üîÑ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–º–∏—Ç–æ–≤

```
eb2bdff –ü–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
c1e83dc –®–∞–≥–∏ 6.1-6.3, 8.1-8.2, 11.1-11.3: —Ä–æ–ª–∏ —Ç—Ä–µ–Ω–µ—Ä–æ–≤, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç—Ä–∏–≥–≥–µ—Ä –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
5b9b925 –®–∞–≥–∏ 5.3, 7.1-7.2, 9.1-9.3: –æ—Ç–º–µ–Ω–∞/–ø–µ—Ä–µ–Ω–æ—Å, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, –æ—Ç–∑—ã–≤—ã —Å –º–µ–¥–∏–∞
065c92b –®–∞–≥ 11: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ last_activity –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3862a6c –û–±–Ω–æ–≤–ª–µ–Ω plan.md: 95% –∑–∞–≤–µ—Ä—à–µ–Ω–æ
```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python main.py
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ .env

```env
TELEGRAM_BOT_TOKEN=your_token
GOOGLE_SHEET_ID=your_sheet_id
ADMIN_CHAT_ID=123456789
TRAINER_CHAT_IDS=987654321,112233445
```

### 3. –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- **–û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** –ó–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –∑–∞–Ω—è—Ç–∏—è, –≤–∏–¥—è—Ç —Å–≤–æ–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã, –æ—Å—Ç–∞–≤–ª—è—é—Ç –æ—Ç–∑—ã–≤—ã
- **–¢—Ä–µ–Ω–µ—Ä—ã:** –í–∏–¥—è—Ç —Å–≤–æ–∏ –∑–∞–Ω—è—Ç–∏—è, –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã:** –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, override —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –†–∞–∑–¥–µ–ª–æ–≤ –ø–ª–∞–Ω–∞ | 11 |
| –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 11 (100%) |
| –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ | 95% |
| –§–∞–π–ª–æ–≤ Python | 25+ |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | ~2500 |
| –°–æ—Å—Ç–æ—è–Ω–∏–π FSM | 15+ |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤ | 40+ |

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å:** –í–µ—Å—å –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ async/await
‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ Google Sheets
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π –≤–æ –≤—Å–µ—Ö –∞–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏—è—Ö
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å:** Docstrings –≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

